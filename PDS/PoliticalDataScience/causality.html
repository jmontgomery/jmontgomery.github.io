<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>12 Causality | Political Data Science</title>
  <meta name="description" content="12 Causality | Political Data Science" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="12 Causality | Political Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="12 Causality | Political Data Science" />
  
  
  

<meta name="author" content="Jacob Montgomery and Mariah Yelenick" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="machine-learning.html"/>

<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Don’t be a clown</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#as-easy-as-cake"><i class="fa fa-check"></i><b>1.1</b> As easy as cake</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#coding"><i class="fa fa-check"></i><b>1.1.1</b> Coding</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#data-acquision"><i class="fa fa-check"></i><b>1.1.2</b> Data acquision</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#algorithms"><i class="fa fa-check"></i><b>1.1.3</b> Algorithms</a></li>
<li class="chapter" data-level="1.1.4" data-path="index.html"><a href="index.html#domain-knowledge"><i class="fa fa-check"></i><b>1.1.4</b> Domain knowledge</a></li>
<li class="chapter" data-level="1.1.5" data-path="index.html"><a href="index.html#putting-it-together"><i class="fa fa-check"></i><b>1.1.5</b> Putting it together</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#class-structures"><i class="fa fa-check"></i><b>1.2</b> Class structures</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#learning-objective-1-team-based-learning"><i class="fa fa-check"></i><b>1.2.1</b> Learning objective #1: Team based learning</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#learning-objective-2-show-up-ready"><i class="fa fa-check"></i><b>1.2.2</b> Learning objective #2: Show up ready</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#learning-objective-3-how-is-this-going-to-work"><i class="fa fa-check"></i><b>1.2.3</b> Learning objective #3: How is this going to work?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#interactive-r-environment"><i class="fa fa-check"></i><b>1.3</b> Interactive R Environment</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-in-r.html"><a href="getting-started-in-r.html"><i class="fa fa-check"></i><b>2</b> Getting Started in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started-in-r.html"><a href="getting-started-in-r.html#learning-objectives"><i class="fa fa-check"></i><b>2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started-in-r.html"><a href="getting-started-in-r.html#assigning-values-to-objects"><i class="fa fa-check"></i><b>2.2</b> Assigning values to objects</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started-in-r.html"><a href="getting-started-in-r.html#r-as-a-calculator"><i class="fa fa-check"></i><b>2.3</b> R as a calculator</a></li>
<li class="chapter" data-level="2.4" data-path="getting-started-in-r.html"><a href="getting-started-in-r.html#the-global-environment-and-how-to-clean-it"><i class="fa fa-check"></i><b>2.4</b> The global environment and how to clean it</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started-in-r.html"><a href="getting-started-in-r.html#getting-help"><i class="fa fa-check"></i><b>2.5</b> Getting help</a></li>
<li class="chapter" data-level="2.6" data-path="getting-started-in-r.html"><a href="getting-started-in-r.html#installing-packages"><i class="fa fa-check"></i><b>2.6</b> Installing packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-types-in-r.html"><a href="data-types-in-r.html"><i class="fa fa-check"></i><b>3</b> Data Types in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-types-in-r.html"><a href="data-types-in-r.html#functions"><i class="fa fa-check"></i><b>3.1</b> Functions</a></li>
<li class="chapter" data-level="3.2" data-path="data-types-in-r.html"><a href="data-types-in-r.html#vectors"><i class="fa fa-check"></i><b>3.2</b> Vectors</a></li>
<li class="chapter" data-level="3.3" data-path="data-types-in-r.html"><a href="data-types-in-r.html#functions-and-vectors"><i class="fa fa-check"></i><b>3.3</b> Functions and vectors</a></li>
<li class="chapter" data-level="3.4" data-path="data-types-in-r.html"><a href="data-types-in-r.html#logicalsbooleans"><i class="fa fa-check"></i><b>3.4</b> Logicals/Booleans</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-types-in-r.html"><a href="data-types-in-r.html#boolean-logic"><i class="fa fa-check"></i><b>3.4.1</b> Boolean logic</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-types-in-r.html"><a href="data-types-in-r.html#charactersstrings"><i class="fa fa-check"></i><b>3.5</b> Characters/Strings</a></li>
<li class="chapter" data-level="3.6" data-path="data-types-in-r.html"><a href="data-types-in-r.html#matrices"><i class="fa fa-check"></i><b>3.6</b> Matrices</a></li>
<li class="chapter" data-level="3.7" data-path="data-types-in-r.html"><a href="data-types-in-r.html#matrix-algebra-optional"><i class="fa fa-check"></i><b>3.7</b> Matrix algebra (optional)</a></li>
<li class="chapter" data-level="3.8" data-path="data-types-in-r.html"><a href="data-types-in-r.html#lists"><i class="fa fa-check"></i><b>3.8</b> Lists</a></li>
<li class="chapter" data-level="3.9" data-path="data-types-in-r.html"><a href="data-types-in-r.html#arrays"><i class="fa fa-check"></i><b>3.9</b> Arrays</a></li>
<li class="chapter" data-level="3.10" data-path="data-types-in-r.html"><a href="data-types-in-r.html#dataframes"><i class="fa fa-check"></i><b>3.10</b> Dataframes</a></li>
<li class="chapter" data-level="3.11" data-path="data-types-in-r.html"><a href="data-types-in-r.html#general-info"><i class="fa fa-check"></i><b>3.11</b> General info</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html"><i class="fa fa-check"></i><b>4</b> Files, For Loops, and Functions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#the-working-directory"><i class="fa fa-check"></i><b>4.1</b> The working directory</a></li>
<li class="chapter" data-level="4.2" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#input-and-output"><i class="fa fa-check"></i><b>4.2</b> Input and output</a></li>
<li class="chapter" data-level="4.3" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#if-else-ifelse"><i class="fa fa-check"></i><b>4.3</b> if, else, ifelse</a></li>
<li class="chapter" data-level="4.4" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#repeat-and-while"><i class="fa fa-check"></i><b>4.4</b> repeat and while</a></li>
<li class="chapter" data-level="4.5" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#for-loops"><i class="fa fa-check"></i><b>4.5</b> for loops</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#next-and-break"><i class="fa fa-check"></i><b>4.5.1</b> next and break</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#functions-1"><i class="fa fa-check"></i><b>4.6</b> Functions</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#the-basics"><i class="fa fa-check"></i><b>4.6.1</b> The basics</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#setting-defaults"><i class="fa fa-check"></i><b>4.7</b> Setting defaults</a></li>
<li class="chapter" data-level="4.8" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#scope"><i class="fa fa-check"></i><b>4.8</b> Scope</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#advanced-scope-topics"><i class="fa fa-check"></i><b>4.8.1</b> Advanced scope topics</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#debugging"><i class="fa fa-check"></i><b>4.9</b> Debugging</a></li>
<li class="chapter" data-level="4.10" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#benchmarking-and-code-improvements"><i class="fa fa-check"></i><b>4.10</b> Benchmarking and code improvements</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#vectorizing"><i class="fa fa-check"></i><b>4.10.1</b> Vectorizing</a></li>
<li class="chapter" data-level="4.10.2" data-path="files-for-loops-and-functions.html"><a href="files-for-loops-and-functions.html#pastecollapse-and-copies"><i class="fa fa-check"></i><b>4.10.2</b> Paste/collapse and copies</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>5</b> Version Control</a>
<ul>
<li class="chapter" data-level="5.1" data-path="version-control.html"><a href="version-control.html#why-version-control"><i class="fa fa-check"></i><b>5.1</b> Why version control?</a></li>
<li class="chapter" data-level="5.2" data-path="version-control.html"><a href="version-control.html#setup"><i class="fa fa-check"></i><b>5.2</b> Setup</a></li>
<li class="chapter" data-level="5.3" data-path="version-control.html"><a href="version-control.html#workflow"><i class="fa fa-check"></i><b>5.3</b> Workflow</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="version-control.html"><a href="version-control.html#pull"><i class="fa fa-check"></i><b>5.3.1</b> Pull</a></li>
<li class="chapter" data-level="5.3.2" data-path="version-control.html"><a href="version-control.html#commit"><i class="fa fa-check"></i><b>5.3.2</b> Commit</a></li>
<li class="chapter" data-level="5.3.3" data-path="version-control.html"><a href="version-control.html#push"><i class="fa fa-check"></i><b>5.3.3</b> Push</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="version-control.html"><a href="version-control.html#branches"><i class="fa fa-check"></i><b>5.4</b> Branches</a></li>
<li class="chapter" data-level="5.5" data-path="version-control.html"><a href="version-control.html#forking"><i class="fa fa-check"></i><b>5.5</b> Forking</a></li>
<li class="chapter" data-level="5.6" data-path="version-control.html"><a href="version-control.html#reverting"><i class="fa fa-check"></i><b>5.6</b> Reverting</a></li>
<li class="chapter" data-level="5.7" data-path="version-control.html"><a href="version-control.html#conflict-management"><i class="fa fa-check"></i><b>5.7</b> Conflict management</a></li>
<li class="chapter" data-level="5.8" data-path="version-control.html"><a href="version-control.html#version-control-in-rstudio"><i class="fa fa-check"></i><b>5.8</b> Version Control in RStudio</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html"><i class="fa fa-check"></i><b>6</b> Data Visualization in R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#intro-to-ggplot2"><i class="fa fa-check"></i><b>6.1</b> Intro to ggplot2</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#example"><i class="fa fa-check"></i><b>6.1.1</b> Example</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#aesthetics"><i class="fa fa-check"></i><b>6.1.2</b> Aesthetics</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#facets"><i class="fa fa-check"></i><b>6.1.3</b> Facets</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-visualization-in-r.html"><a href="data-visualization-in-r.html#more-geom-options"><i class="fa fa-check"></i><b>6.2</b> More <code>geom</code> options</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html"><i class="fa fa-check"></i><b>7</b> dplyr and tidy</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#into-the-tidyverse"><i class="fa fa-check"></i><b>7.1</b> Into the tidyverse</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#our-example"><i class="fa fa-check"></i><b>7.1.1</b> Our example</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#back-to-dplyr"><i class="fa fa-check"></i><b>7.2</b> Back to <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#filter"><i class="fa fa-check"></i><b>7.2.1</b> <code>filter</code></a></li>
<li class="chapter" data-level="7.2.2" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#arrange"><i class="fa fa-check"></i><b>7.2.2</b> <code>arrange</code></a></li>
<li class="chapter" data-level="7.2.3" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#select"><i class="fa fa-check"></i><b>7.2.3</b> <code>select</code></a></li>
<li class="chapter" data-level="7.2.4" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#mutate"><i class="fa fa-check"></i><b>7.2.4</b> <code>mutate</code></a></li>
<li class="chapter" data-level="7.2.5" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#summarise"><i class="fa fa-check"></i><b>7.2.5</b> <code>summarise</code></a></li>
<li class="chapter" data-level="7.2.6" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#piping"><i class="fa fa-check"></i><b>7.2.6</b> Piping</a></li>
<li class="chapter" data-level="7.2.7" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#pivots"><i class="fa fa-check"></i><b>7.2.7</b> Pivots</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#relational-data"><i class="fa fa-check"></i><b>7.3</b> Relational data</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#mutating-join"><i class="fa fa-check"></i><b>7.3.1</b> Mutating join</a></li>
<li class="chapter" data-level="7.3.2" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#joins-topography"><i class="fa fa-check"></i><b>7.3.2</b> Joins topography</a></li>
<li class="chapter" data-level="7.3.3" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#many-and-one-to-many"><i class="fa fa-check"></i><b>7.3.3</b> Many and one-to-many</a></li>
<li class="chapter" data-level="7.3.4" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#filtering-joins"><i class="fa fa-check"></i><b>7.3.4</b> Filtering joins</a></li>
<li class="chapter" data-level="7.3.5" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#set-operations"><i class="fa fa-check"></i><b>7.3.5</b> Set operations</a></li>
<li class="chapter" data-level="7.3.6" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#exercise"><i class="fa fa-check"></i><b>7.3.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#stringr"><i class="fa fa-check"></i><b>7.4</b> <code>stringr</code></a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#things-you-havent-thought-about-strings"><i class="fa fa-check"></i><b>7.4.1</b> Things you haven’t thought about strings</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#pipes-and-maps"><i class="fa fa-check"></i><b>7.5</b> Pipes and maps</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#limitations-of-pipes"><i class="fa fa-check"></i><b>7.5.1</b> Limitations of Pipes</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#map"><i class="fa fa-check"></i><b>7.6</b> <code>map</code></a></li>
<li class="chapter" data-level="7.7" data-path="dplyr-and-tidy.html"><a href="dplyr-and-tidy.html#walk-purrr-and-more"><i class="fa fa-check"></i><b>7.7</b> walk, purrr, and more</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="more-useful-packages.html"><a href="more-useful-packages.html"><i class="fa fa-check"></i><b>8</b> More useful packages</a>
<ul>
<li class="chapter" data-level="8.1" data-path="more-useful-packages.html"><a href="more-useful-packages.html#stringr-1"><i class="fa fa-check"></i><b>8.1</b> <code>stringr</code></a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="more-useful-packages.html"><a href="more-useful-packages.html#things-you-havent-thought-about-strings-1"><i class="fa fa-check"></i><b>8.1.1</b> Things you haven’t thought about strings</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="functions-and-packages.html"><a href="functions-and-packages.html"><i class="fa fa-check"></i><b>9</b> Functions and Packages</a>
<ul>
<li class="chapter" data-level="9.1" data-path="functions-and-packages.html"><a href="functions-and-packages.html#apply-and-its-friends"><i class="fa fa-check"></i><b>9.1</b> <code>apply</code> and its friends</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="functions-and-packages.html"><a href="functions-and-packages.html#apply"><i class="fa fa-check"></i><b>9.1.1</b> <code>apply</code></a></li>
<li class="chapter" data-level="9.1.2" data-path="functions-and-packages.html"><a href="functions-and-packages.html#lapply"><i class="fa fa-check"></i><b>9.1.2</b> <code>lapply</code></a></li>
<li class="chapter" data-level="9.1.3" data-path="functions-and-packages.html"><a href="functions-and-packages.html#sapply"><i class="fa fa-check"></i><b>9.1.3</b> <code>sapply</code></a></li>
<li class="chapter" data-level="9.1.4" data-path="functions-and-packages.html"><a href="functions-and-packages.html#tapply"><i class="fa fa-check"></i><b>9.1.4</b> <code>tapply</code></a></li>
<li class="chapter" data-level="9.1.5" data-path="functions-and-packages.html"><a href="functions-and-packages.html#sweep"><i class="fa fa-check"></i><b>9.1.5</b> <code>sweep</code></a></li>
<li class="chapter" data-level="9.1.6" data-path="functions-and-packages.html"><a href="functions-and-packages.html#by"><i class="fa fa-check"></i><b>9.1.6</b> <code>by</code></a></li>
<li class="chapter" data-level="9.1.7" data-path="functions-and-packages.html"><a href="functions-and-packages.html#vapply-and-more"><i class="fa fa-check"></i><b>9.1.7</b> <code>vapply</code> And more</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="functions-and-packages.html"><a href="functions-and-packages.html#plyr"><i class="fa fa-check"></i><b>9.2</b> <code>plyr</code></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html"><i class="fa fa-check"></i><b>10</b> Using SQL syntax on an R dataframe</a>
<ul>
<li class="chapter" data-level="10.1" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html#sql"><i class="fa fa-check"></i><b>10.1</b> SQL</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html#select-and-from"><i class="fa fa-check"></i><b>10.1.1</b> <code>SELECT</code> and <code>FROM</code></a></li>
<li class="chapter" data-level="10.1.2" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html#where"><i class="fa fa-check"></i><b>10.1.2</b> <code>WHERE</code></a></li>
<li class="chapter" data-level="10.1.3" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html#functions-2"><i class="fa fa-check"></i><b>10.1.3</b> Functions</a></li>
<li class="chapter" data-level="10.1.4" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html#having"><i class="fa fa-check"></i><b>10.1.4</b> <code>HAVING</code></a></li>
<li class="chapter" data-level="10.1.5" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html#withas-and-subqueries"><i class="fa fa-check"></i><b>10.1.5</b> <code>WITH</code>/<code>AS</code> and Subqueries</a></li>
<li class="chapter" data-level="10.1.6" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html#joins"><i class="fa fa-check"></i><b>10.1.6</b> Joins</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="using-sql-syntax-on-an-r-dataframe.html"><a href="using-sql-syntax-on-an-r-dataframe.html#the-sqldf-package"><i class="fa fa-check"></i><b>10.2</b> The <code>sqldf</code> package</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>11</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="11.1" data-path="machine-learning.html"><a href="machine-learning.html#supervised-learning"><i class="fa fa-check"></i><b>11.1</b> Supervised Learning</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="machine-learning.html"><a href="machine-learning.html#the-gist"><i class="fa fa-check"></i><b>11.1.1</b> The Gist</a></li>
<li class="chapter" data-level="11.1.2" data-path="machine-learning.html"><a href="machine-learning.html#what-could-go-wrong"><i class="fa fa-check"></i><b>11.1.2</b> What could go wrong?</a></li>
<li class="chapter" data-level="11.1.3" data-path="machine-learning.html"><a href="machine-learning.html#example-predicting-presidential-elections-with-vote-share"><i class="fa fa-check"></i><b>11.1.3</b> Example: Predicting presidential elections with vote share</a></li>
<li class="chapter" data-level="11.1.4" data-path="machine-learning.html"><a href="machine-learning.html#the-complexity-of-keeping-it-simple"><i class="fa fa-check"></i><b>11.1.4</b> The complexity of keeping it simple</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="machine-learning.html"><a href="machine-learning.html#classification"><i class="fa fa-check"></i><b>11.2</b> Classification</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="machine-learning.html"><a href="machine-learning.html#classification-basics-binary-outcomes"><i class="fa fa-check"></i><b>11.2.1</b> Classification basics: Binary outcomes</a></li>
<li class="chapter" data-level="11.2.2" data-path="machine-learning.html"><a href="machine-learning.html#the-linear-classifier-aka-logit"><i class="fa fa-check"></i><b>11.2.2</b> The linear classifier (AKA Logit)</a></li>
<li class="chapter" data-level="11.2.3" data-path="machine-learning.html"><a href="machine-learning.html#more-models"><i class="fa fa-check"></i><b>11.2.3</b> More models</a></li>
<li class="chapter" data-level="11.2.4" data-path="machine-learning.html"><a href="machine-learning.html#random-forests"><i class="fa fa-check"></i><b>11.2.4</b> Random forests</a></li>
<li class="chapter" data-level="11.2.5" data-path="machine-learning.html"><a href="machine-learning.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>11.2.5</b> K Nearest Neighbors</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="machine-learning.html"><a href="machine-learning.html#putting-that-in-action"><i class="fa fa-check"></i><b>11.3</b> Putting that in action</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="causality.html"><a href="causality.html"><i class="fa fa-check"></i><b>12</b> Causality</a>
<ul>
<li class="chapter" data-level="12.1" data-path="causality.html"><a href="causality.html#correlation-and-causation"><i class="fa fa-check"></i><b>12.1</b> Correlation and causation</a></li>
<li class="chapter" data-level="12.2" data-path="causality.html"><a href="causality.html#a-formal-definition"><i class="fa fa-check"></i><b>12.2</b> A formal definition</a></li>
<li class="chapter" data-level="12.3" data-path="causality.html"><a href="causality.html#formal-presentation-of-an-ate"><i class="fa fa-check"></i><b>12.3</b> Formal presentation of an ATE</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="causality.html"><a href="causality.html#danger"><i class="fa fa-check"></i><b>12.3.1</b> Danger!</a></li>
<li class="chapter" data-level="12.3.2" data-path="causality.html"><a href="causality.html#does-drinking-make-you-more-educated"><i class="fa fa-check"></i><b>12.3.2</b> Does drinking make you more educated?</a></li>
<li class="chapter" data-level="12.3.3" data-path="causality.html"><a href="causality.html#problem-it-can-be-way-more-subtle"><i class="fa fa-check"></i><b>12.3.3</b> Problem: It can be way more subtle</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="causality.html"><a href="causality.html#estimating-ate"><i class="fa fa-check"></i><b>12.4</b> Estimating ATE</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="causality.html"><a href="causality.html#filling-in-the-potential-values"><i class="fa fa-check"></i><b>12.4.1</b> Filling in the potential values</a></li>
<li class="chapter" data-level="12.4.2" data-path="causality.html"><a href="causality.html#good-causal-inference"><i class="fa fa-check"></i><b>12.4.2</b> Good causal inference</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="causality.html"><a href="causality.html#experiments-ab-testing"><i class="fa fa-check"></i><b>12.5</b> Experiments: A/B Testing</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="causality.html"><a href="causality.html#what-to-do-when-you-cant-experiment"><i class="fa fa-check"></i><b>12.5.1</b> What to do when you can’t experiment:</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="causality.html"><a href="causality.html#panel-data-and-fixed-effects"><i class="fa fa-check"></i><b>12.6</b> Panel data and fixed effects</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="causality.html"><a href="causality.html#example-are-elections-fought-over-non-economic-issues-more-when-globalization-increases"><i class="fa fa-check"></i><b>12.6.1</b> Example: Are elections fought over non-economic issues more when globalization increases?</a></li>
<li class="chapter" data-level="12.6.2" data-path="causality.html"><a href="causality.html#naive-regression"><i class="fa fa-check"></i><b>12.6.2</b> Naive regression</a></li>
<li class="chapter" data-level="12.6.3" data-path="causality.html"><a href="causality.html#fixed-effects"><i class="fa fa-check"></i><b>12.6.3</b> Fixed effects</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="causality.html"><a href="causality.html#difference-in-differences"><i class="fa fa-check"></i><b>12.7</b> Difference-in-differences</a>
<ul>
<li class="chapter" data-level="12.7.1" data-path="causality.html"><a href="causality.html#did-in-practice"><i class="fa fa-check"></i><b>12.7.1</b> DID in practice</a></li>
<li class="chapter" data-level="12.7.2" data-path="causality.html"><a href="causality.html#regression-discontinuity"><i class="fa fa-check"></i><b>12.7.2</b> Regression discontinuity</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Political Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="causality" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Causality</h1>
<div id="correlation-and-causation" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Correlation and causation</h2>
<p><img src="../Slides/Images/correlation.png" /></p>
<p><img src="../Slides/Images/dt140509.png" /></p>
<p>What is causality?</p>
<ol style="list-style-type: decimal">
<li>Understand how social scientists define causation</li>
<li>Understand the fundamental problem of causal inference</li>
<li>Understand why experiments are social scientists’ ideal method of determining causation</li>
<li>Understand the term “average treatment effect”</li>
<li>Understand the difficulties social scientists face when using correlation in the absence of an experiment to establish causality.</li>
<li>Understand how to estimate the causal effect of a (simple) experimental treatment.</li>
<li>Get a sense of how this can all get a lot more complicated.</li>
</ol>
<p>What’s the big deal here?</p>
<ul>
<li>In many cases we are not interested in describing or predicting. We are interested in explaining.</li>
<li>Most of the sort of “why” questions we ask are fundamentally about causal inference.
<ul>
<li>Does income inequality cause political polarization?</li>
<li>Does being democratic make a country less likely to go to war with its neighbors?</li>
<li>Does being appointed by a Republican make a judge more likely to vote consistent with conservative policies?</li>
</ul></li>
</ul>
<p>So what, exactly, is causation?</p>
<ul>
<li>This is actually a deep question, and philosophers still disagree about it.</li>
<li>But contemporary social science has partially converged on a particular definition often attributed to Rubin/Neyman/Holland.<br />
</li>
<li>Sometimes also called the “potential outcomes” framework.</li>
</ul>
<hr />
<p>The parable of the the accident:</p>
<p>Imagine you’re driving a car down a four-lane road. All of the sudden, out of nowhere, a car drives out of its lane, into yours, right in front of your car. You can tell that the driver is texting, and isn’t looking at the road. You slam on the breaks, and your hood collides with his fender. Fortunately, you’re shaken, but fine, and so is the other driver. Chances are, you will be asking yourselves some questions.</p>
<ul>
<li>Why did that happen?<br />
</li>
<li>What would have happened if I had been paying more attention to the cars around me?</li>
<li>What if that driver hadn’t been texting?</li>
</ul>
<p>These are causal questions.</p>
<p>What caused our accident?</p>
<ul>
<li><p>The other driver?</p></li>
<li><p>Or maybe the fact the other driver was texting?</p></li>
<li><p>The sky was blue?</p></li>
<li><p>Some can be ruled out by other knowledge.</p></li>
<li><p>One plausible <em>causal</em> argument is that <strong>if</strong> the driver had not been texting, the accident would not have happened.</p></li>
<li><p>This is the kind of reasoning we use when we say that texting while driving <strong>caused</strong> the accident.</p></li>
<li><p>We are comparing what happened (what we observed) to the counterfactual (what would have happened).</p></li>
</ul>
</div>
<div id="a-formal-definition" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> A formal definition</h2>
<ul>
<li>We say that <strong>X caused Y if Y would not have occured but for X</strong>.</li>
<li>So we are imagining two worlds:
<ul>
<li>A world where X happens and then we observe Y.</li>
<li>A world where X does <strong>not</strong> happen and then we observe Y.</li>
</ul></li>
<li>These are the “potential outcomes.”</li>
<li>And the difference between potential outcomes is the <strong>causal effect</strong> of X.</li>
</ul>
<p>Go lose yourself in the philisophical background of this debate:</p>
<p><a href="https://plato.stanford.edu/entries/causal-models/" class="uri">https://plato.stanford.edu/entries/causal-models/</a></p>
<p>Example: Did the stimulus package work?</p>
<ul>
<li><p>In 2009, Congress passed a large stimulus package to address the 2008 financial crisis.</p></li>
<li><p>Many question whether it really had an effect on the economy or unemployment rates.</p></li>
<li><p>What was the causal effect of the stimulus?</p></li>
<li><p>To answer this, we would need to observe two things:</p>
<ol style="list-style-type: decimal">
<li>GDP growth/unemployment in the presence of the stimulus package.</li>
<li>GDP growth/unemployment in the absence of the stimulus package.</li>
</ol></li>
<li><p>The difference between these two is the causal effect of the stimulus.</p></li>
</ul>
<p><strong>The fundamental problem of causal inference</strong></p>
<ul>
<li>Well, there’s a pretty big problem here: we only get to observe one timeline.</li>
<li>The stimulus was passed, and we can <em>never</em> know (without some additional assumptions) what would have happened in its absence.</li>
<li>A huge literature has developed around trying to make clear causal/reasonable/appropriate causal statements while making as few assumptions as possible.</li>
</ul>
<p>Moving away from the personal</p>
<ul>
<li>One approach is to shift to move away from trying to estimate the causal effect of X on all units.</li>
<li>Instead we estimate the <strong>average treatment effect (ATE)</strong> or one of its cousins.</li>
<li>The ATE is an <strong>estimate</strong>. We will talk later about how to <strong>estimate</strong> it.</li>
<li>The ATE is the <strong>average</strong> difference in potential outcomes across all of your units. You still can’t <em>observe</em> it, but it is easier to approximate (estimate) it from the data you observe.</li>
</ul>
</div>
<div id="formal-presentation-of-an-ate" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> Formal presentation of an ATE</h2>
<ul>
<li>Imagine we have a single covariate <span class="math inline">\(T\)</span> that can take on two values <span class="math inline">\(T \in \{0, 1\}\)</span>.</li>
</ul>
<p><span class="math display">\[\begin{array}{l c c c}
\text{Unit} &amp; y_0 &amp; y_1 &amp; y_1-y_0 \\ 
\hline
1 &amp; 2.4 &amp; 3.2 &amp; 0.8 \\
2 &amp; 42.3 &amp; 40.1 &amp; -2.2\\
3 &amp; 13 &amp; 16.4 &amp; 2.4\\
\vdots &amp;  &amp; &amp; \vdots\\
n &amp; -1.2 &amp; -1.8 &amp; -0.6
\end{array}\]</span></p>
<ul>
<li>The average causal effect would be (under reasonable assumptions):</li>
</ul>
<p><span class="math display">\[\text{mean}(y_1-y_0) = \text{mean}(y_1) - \text{mean}(y_0)\]</span></p>
<ul>
<li>The problem is that when we get a <em>real</em> dataset it’s going to look like this:</li>
</ul>
<p><span class="math display">\[\begin{array}{l c c c}
\text{Unit} &amp; y_0 &amp; y_1 &amp; y_1-y_0 \\ 
\hline
1 &amp; ? &amp; 3.2 &amp; ? \\
2 &amp; ? &amp; 40.1 &amp; ?\\
3 &amp; 13 &amp; ? &amp; ?\\
\vdots &amp;  &amp; &amp; \vdots\\
n &amp; -1.2 &amp; ? &amp; ?
\end{array}\]</span></p>
<ul>
<li>We will always be missing one of the counterfactual outcomes.</li>
<li>And the goal of all of almost all approaches to causal inference is to fill in the missing values on this table.</li>
</ul>
<div id="danger" class="section level3" number="12.3.1">
<h3><span class="header-section-number">12.3.1</span> Danger!</h3>
<p>So it turns out that doing this well is pretty hard. Why?</p>
<ol style="list-style-type: decimal">
<li>Units where <span class="math inline">\(T=0\)</span> might be fundamentally different than those where <span class="math inline">\(T=1\)</span>.<br />
</li>
<li>There might be a “lurking variable” that is correlated with both <span class="math inline">\(T\)</span> and <span class="math inline">\(Y\)</span>.</li>
<li>We can’t really measure for all possible lurking variables.</li>
</ol>
</div>
<div id="does-drinking-make-you-more-educated" class="section level3" number="12.3.2">
<h3><span class="header-section-number">12.3.2</span> Does drinking make you more educated?</h3>
<p><img src="../Slides/Images/booze.jpg" /></p>
<ol style="list-style-type: decimal">
<li>Education <span class="math inline">\(\rightarrow\)</span> Spending more on alcohol</li>
<li>Spending more on alcohol <span class="math inline">\(\rightarrow\)</span> Education</li>
<li>Income?</li>
</ol>
</div>
<div id="problem-it-can-be-way-more-subtle" class="section level3" number="12.3.3">
<h3><span class="header-section-number">12.3.3</span> Problem: It can be way more subtle</h3>
<p><img src="../Slides/Images/wald.png" /></p>
<p>(Mount 2010)</p>
<p><img src="../Slides/Images/rh.png" />
<img src="../Slides/Images/goldstein.png" /></p>
<p>Rogers, Coffman, and Bergman:</p>
<p>While the authors control for certain variables, their research only implies there is a relationship between parental involvement and student performance. This caveat is important; <strong>the existence of a relationship does not tell us what causes what</strong>.</p>
<p>Think of it this way: <strong>If you had two children, and one was getting A’s and the other C’s, which of them would you help more? The C student.</strong> An outsider, noticing that you’ve spent the school year helping only one of your children, might infer that parental help caused that child to earn lower grades. This of course would not be the case, and inferring causation here would be a mistake.</p>
</div>
</div>
<div id="estimating-ate" class="section level2" number="12.4">
<h2><span class="header-section-number">12.4</span> Estimating ATE</h2>
<ul>
<li>We’ve talked about how we can’t <em>know</em> the causal effect of an intervention on a single unit.</li>
<li>And we’ve talked about the ATE. But how would we go about estimating it?</li>
</ul>
<p><span class="math display">\[\begin{array}{l c c c}
\text{Unit} &amp; y_0 &amp; y_1 &amp; y_1-y_0 \\ 
\hline
1 &amp; ? &amp; 3.2 &amp; ? \\
2 &amp; ? &amp; 40.1 &amp; ?\\
3 &amp; 13 &amp; ? &amp; ?\\
4 &amp; ? &amp; 18.3 &amp; ?\\
5 &amp; 4.1 &amp; ? &amp; ?\\
6 &amp; -5.1 &amp; ? &amp; ?\\
\end{array}\]</span></p>
<div id="filling-in-the-potential-values" class="section level3" number="12.4.1">
<h3><span class="header-section-number">12.4.1</span> Filling in the potential values</h3>
<p>We are left with essentially two options (with shades of gray in between)</p>
<ol style="list-style-type: decimal">
<li>We can fill in the missing values (or average values of missing values) of our table using a model.
<ul>
<li>We can try to mine our data in some way to infer values for missing values (or averages of missing values).</li>
<li>Mabe we could put extreme bounds on them based on possible (or plausible) values.</li>
<li>Maybe even rely on other dependent variables in large/complex systems.</li>
</ul></li>
<li>We can use our research <em>design</em>.
<ul>
<li>We can rely on randomization</li>
<li>We can rely on “natural experiments” that help us fill in the missing counterfactuals.</li>
</ul></li>
</ol>
</div>
<div id="good-causal-inference" class="section level3" number="12.4.2">
<h3><span class="header-section-number">12.4.2</span> Good causal inference</h3>
<p><span class="math display">\[\begin{array}{l c c c}
\text{Unit} &amp; y_0 &amp; y_1 &amp; y_1-y_0 \\ 
\hline
1 &amp; ? &amp; 3.2 &amp; ? \\
2 &amp; ? &amp; 40.1 &amp; ?\\
3 &amp; 13 &amp; ? &amp; ?\\
4 &amp; ? &amp; 18.3 &amp; ?\\
5 &amp; 4.1 &amp; ? &amp; ?\\
6 &amp; -5.1 &amp; ? &amp; ?\\
\end{array}\]</span></p>
<ul>
<li><p>An attractive approach here is to try something like this.</p>
<ul>
<li>Take the average of all of the cases where <span class="math inline">\(T=1\)</span></li>
<li>Take the average of the cases where <span class="math inline">\(T=0\)</span>.</li>
<li>Subtract them.</li>
</ul>
<p><span class="math display">\[\frac{3.2 + 40.1 + 18.3}{3} - \frac{13+4.1-4.1}{3}\]</span></p></li>
<li><p>Can we use this to estimate the ATE?</p></li>
<li><p>Yes, but only if:</p>
<ul>
<li>Assignment of T is unrelated to potential outcomes.</li>
<li>Units don’t affect each other</li>
<li>No hidden variation in treatment</li>
</ul></li>
<li><p>Hard to do in a lot of settings, but we’ll talk about this more next class.</p></li>
<li><p>But much easier to do if we use our old friend randomization.</p></li>
</ul>
</div>
</div>
<div id="experiments-ab-testing" class="section level2" number="12.5">
<h2><span class="header-section-number">12.5</span> Experiments: A/B Testing</h2>
<ul>
<li>Imagine that we had <em>randomly</em> assigned each unit to a treatment/control condition.</li>
<li>Now we know for certain that T and the potential outcomes are independent.</li>
<li>We can also take steps so that the treatment does not vary in intensity across units (?).</li>
<li>And in many cases is easy to assure no between-unit contact.</li>
<li>This all makes causal inference (relatively) easy, and is why randomized controlled trials are considered the gold standard.</li>
</ul>
<p>Example: Audit studies for employment</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb835-1"><a href="causality.html#cb835-1"></a>resume&lt;-<span class="kw">read.csv</span>(<span class="st">&quot;../Datasets/resume.csv&quot;</span>)</span></code></pre></div>
<p>Actual link:
<a href="http://politicaldatascience.com/PDS/Datasets/resume.csv" class="uri">http://politicaldatascience.com/PDS/Datasets/resume.csv</a></p>
<ul>
<li>This study sent out resumes for job applications.<br />
</li>
<li>Everything was the same, except for the first name of the applicant.</li>
<li>Names were chosen to signal race and gender
<ul>
<li>e.g., Aisha, Allison, Hakim, Brad, Rasheed, Todd, Tanisha, Jill, etc.</li>
</ul></li>
<li>Question: Does the perceived race/gender of the applicant affect the probability that they receive a call?</li>
<li>Dataset includes four variables:
<ul>
<li>Name: <code>firstname</code></li>
<li>Implied gender: <code>sex</code></li>
<li>Race: <code>race</code></li>
<li>Binary indicator of whether receivd a call: <code>call</code></li>
</ul></li>
</ul>
<p>So what was the causal effect?</p>
<div class="sourceCode" id="cb836"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb836-1"><a href="causality.html#cb836-1"></a><span class="kw">tapply</span>(resume<span class="op">$</span>call, <span class="dt">INDEX=</span>resume<span class="op">$</span>race, <span class="dt">FUN=</span>mean)</span></code></pre></div>
<pre><code>##      black      white 
## 0.06447639 0.09650924</code></pre>
<p>A little over 3%.</p>
<p>Do this a little easier with:</p>
<div class="sourceCode" id="cb838"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb838-1"><a href="causality.html#cb838-1"></a><span class="kw">summary</span>(<span class="kw">lm</span>(call<span class="op">~</span>race, <span class="dt">data=</span>resume))</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = call ~ race, data = resume)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.09651 -0.09651 -0.06448 -0.06448  0.93552 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.064476   0.005505  11.713  &lt; 2e-16 ***
## racewhite   0.032033   0.007785   4.115 3.94e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.2716 on 4868 degrees of freedom
## Multiple R-squared:  0.003466,   Adjusted R-squared:  0.003261 
## F-statistic: 16.93 on 1 and 4868 DF,  p-value: 3.941e-05</code></pre>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb840-1"><a href="causality.html#cb840-1"></a><span class="kw">summary</span>(<span class="kw">lm</span>(call<span class="op">~</span>race<span class="op">+</span>sex, <span class="dt">data=</span>resume))</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = call ~ race + sex, data = resume)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.09866 -0.09866 -0.06653 -0.06653  0.94259 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.066534   0.005886  11.304  &lt; 2e-16 ***
## racewhite    0.032130   0.007786   4.127 3.74e-05 ***
## sexmale     -0.009128   0.009239  -0.988    0.323    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.2716 on 4867 degrees of freedom
## Multiple R-squared:  0.003666,   Adjusted R-squared:  0.003256 
## F-statistic: 8.953 on 2 and 4867 DF,  p-value: 0.0001314</code></pre>
<div id="what-to-do-when-you-cant-experiment" class="section level3" number="12.5.1">
<h3><span class="header-section-number">12.5.1</span> What to do when you can’t experiment:</h3>
<ul>
<li><p>We want to measure the causal effect of some variable <span class="math inline">\(T\)</span> on outcome <span class="math inline">\(Y\)</span>.</p></li>
<li><p>But what if the cases where <span class="math inline">\(T=0\)</span> are fundamentally different from those where <span class="math inline">\(T=1\)</span>?</p></li>
<li><p>Just comparing <span class="math inline">\(\bar{Y} | T=1\)</span> to <span class="math inline">\(\bar{Y} | T=0\)</span> will not give us the causal effect of <span class="math inline">\(T\)</span>.</p></li>
<li><p>More technically, for this to be a valid approach we need (at least):</p></li>
</ul>
<p><span class="math display">\[(Y_0, Y_1) \perp T\]</span>
- So what do we do when this isn’t true?</p>
<p>We are going to assume:</p>
<p><span class="math display">\[(Y_0, Y_1) \perp T | X\]</span></p>
<p>How to do that?</p>
<ul>
<li>Matching, some forms of marginal structural models, and more.</li>
<li>The simplest, though, is to just “control for” possible confounding.</li>
</ul>
<p><span class="math display">\[Y=\beta_0 + \beta_1 T + \beta_2 X + \epsilon\]</span>
<span class="math display">\[\epsilon \sim N(0, \sigma^2) \]</span></p>
<ul>
<li><p>This should look familliar – multiple linear regression.</p></li>
<li><p>But <em>if</em> we have all of the right covariates and <em>if</em> we have the right model, then <span class="math inline">\(E(\beta_1) = ATE\)</span>.</p></li>
</ul>
<div id="example-new-hampshire-2008-primary-clinton-vs.-obama" class="section level4" number="12.5.1.1">
<h4><span class="header-section-number">12.5.1.1</span> Example: New Hampshire 2008 primary: Clinton vs. Obama</h4>
<div class="sourceCode" id="cb842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb842-1"><a href="causality.html#cb842-1"></a><span class="kw">library</span>(faraway)</span>
<span id="cb842-2"><a href="causality.html#cb842-2"></a><span class="kw">data</span>(newhamp)</span></code></pre></div>
<p>N=276 wards in New Hampshire</p>
<ul>
<li><strong>pObama</strong>: Proportion of vote going to Obama</li>
<li><strong>votesys</strong>: Hand counted (H) vs. machine count (D)</li>
<li><strong>Dean</strong>: Proportion of voters for Howard Dean in 2004</li>
<li><strong>pci</strong>: Per capita annual income in USD</li>
<li><strong>white</strong>: Proportion white according to 2000 census</li>
</ul>
<p>Your data science friend says IT’S ALL RIGGED!</p>
<div class="sourceCode" id="cb843"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb843-1"><a href="causality.html#cb843-1"></a><span class="kw">summary</span>(<span class="kw">lm</span>(pObama<span class="op">~</span>votesys, <span class="dt">data=</span>newhamp))</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = pObama ~ votesys, data = newhamp)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.172147 -0.047643 -0.004519  0.040363  0.229107 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.352517   0.005173  68.148  &lt; 2e-16 ***
## votesysH    0.042487   0.008509   4.993 1.06e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.06823 on 274 degrees of freedom
## Multiple R-squared:  0.0834, Adjusted R-squared:  0.08006 
## F-statistic: 24.93 on 1 and 274 DF,  p-value: 1.059e-06</code></pre>
<p>Is this the effect of the voting machines?</p>
<div class="sourceCode" id="cb845"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb845-1"><a href="causality.html#cb845-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb845-2"><a href="causality.html#cb845-2"></a>newhamp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(votesys) <span class="op">%&gt;%</span></span>
<span id="cb845-3"><a href="causality.html#cb845-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">White =</span> <span class="kw">mean</span>(white, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), </span>
<span id="cb845-4"><a href="causality.html#cb845-4"></a>            <span class="dt">Income=</span><span class="kw">mean</span>(pci, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),</span>
<span id="cb845-5"><a href="causality.html#cb845-5"></a>            <span class="dt">Dean =</span> <span class="kw">mean</span>(Dean, <span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   votesys White Income  Dean
##   &lt;fct&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 D       0.954 23367. 0.251
## 2 H       0.976 22054. 0.342</code></pre>
<p>Probably not</p>
<div class="sourceCode" id="cb847"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb847-1"><a href="causality.html#cb847-1"></a><span class="kw">summary</span>(<span class="kw">lm</span>(pObama<span class="op">~</span>votesys <span class="op">+</span><span class="st"> </span>Dean <span class="op">+</span><span class="st"> </span>white <span class="op">+</span><span class="st"> </span>pci, <span class="dt">data=</span>newhamp))</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = pObama ~ votesys + Dean + white + pci, data = newhamp)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.156310 -0.034675 -0.001047  0.028146  0.216232 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  2.530e-01  1.150e-01   2.200   0.0287 *  
## votesysH     6.650e-03  7.647e-03   0.870   0.3853    
## Dean         4.925e-01  3.950e-02  12.468  &lt; 2e-16 ***
## white       -1.325e-01  1.200e-01  -1.105   0.2703    
## pci          4.373e-06  6.685e-07   6.542 3.02e-10 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.05062 on 271 degrees of freedom
## Multiple R-squared:  0.501,  Adjusted R-squared:  0.4937 
## F-statistic: 68.03 on 4 and 271 DF,  p-value: &lt; 2.2e-16</code></pre>
<div class="sourceCode" id="cb849"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb849-1"><a href="causality.html#cb849-1"></a>congress &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://jmontgomery.github.io/ProblemSets/incumbents.csv&quot;</span>)</span></code></pre></div>
<p>This is a dataset of incumbent members of congress running for election. The dependent variable of interest is <code>voteshare</code>, which is the percent of the two-party vote received by the incumbent.</p>
<ul>
<li>Run a regression with <code>voteshare</code> as the dependent variable and <code>incspend</code> as the explanatory variable. <code>incspend</code> is the amount of money spent by the candidate in the election. What does the regression result mean? That is, what would be the naive causal interpretation?</li>
<li>Is there imbalance in <code>incspend</code> depending on the quality of the challenger (<code>challquality</code>). What does that mean for your causal inference?</li>
<li>Use the variables <code>chalspend</code> (spending by the challenger), <code>presvote</code> (share of vote going to the candidates’ presidential candidate), and <code>chalquality</code> to try and “adjust”.</li>
</ul>
</div>
</div>
</div>
<div id="panel-data-and-fixed-effects" class="section level2" number="12.6">
<h2><span class="header-section-number">12.6</span> Panel data and fixed effects</h2>
<ul>
<li><p>As the Congress example illustrates, there is a fundamental limit to this kind of strategy.</p></li>
<li><p>We can’t always control for everything. And even if we could, results can become highly model dependent.</p></li>
<li><p>Another approach is to try and collect data on the same units over time.</p></li>
<li><p>We can then try and “control” for factors (even unobserved factors) that make each unit different from the others using <strong>fixed effects</strong>.</p>
<ul>
<li><p>This is just a fancy way to say we are going to have a different intercept for each unit in our data.</p></li>
<li><p>Requires we focus only on treatments that change over time.</p></li>
<li><p>If treatment doesn’t change (much) will give us a false negative.</p></li>
</ul></li>
</ul>
<div id="example-are-elections-fought-over-non-economic-issues-more-when-globalization-increases" class="section level3" number="12.6.1">
<h3><span class="header-section-number">12.6.1</span> Example: Are elections fought over non-economic issues more when globalization increases?</h3>
<ul>
<li>Panel data includes repeated observations of Canada, France, the United States and the United Kingdom.<br />
</li>
<li>We have measures of (a) the degree to which each election is about non-economic issues and (b) level of globalization in the country.</li>
<li>We want to see if globalization <strong>causes</strong> more focus on non-economic issues.</li>
</ul>
<p>With no fixed effects:</p>
<p><img src="../Slides/Images/no_FE_reg.png" /></p>
<p>What does that mean?</p>
<ul>
<li>Each dot is an election.</li>
<li>Across these four countries, there is no relationship.</li>
<li>But what if allowed for country-level fixed effects?
<ul>
<li>The US and France may just be different on average in how much politics focuses on economics?</li>
<li>So we have an “intercept shift”</li>
</ul></li>
</ul>
<p>With fixed effects:</p>
<p><img src="../Slides/Images/FE_reg.png" /></p>
</div>
<div id="naive-regression" class="section level3" number="12.6.2">
<h3><span class="header-section-number">12.6.2</span> Naive regression</h3>
<div class="sourceCode" id="cb850"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb850-1"><a href="causality.html#cb850-1"></a><span class="kw">library</span>(AER)</span>
<span id="cb850-2"><a href="causality.html#cb850-2"></a><span class="kw">data</span>(<span class="st">&quot;Fatalities&quot;</span>)</span>
<span id="cb850-3"><a href="causality.html#cb850-3"></a>Fatalities<span class="op">$</span>fatal_rate &lt;-<span class="st"> </span>Fatalities<span class="op">$</span>fatal <span class="op">/</span><span class="st"> </span>Fatalities<span class="op">$</span>pop <span class="op">*</span><span class="st"> </span><span class="dv">10000</span></span>
<span id="cb850-4"><a href="causality.html#cb850-4"></a><span class="kw">summary</span>(<span class="kw">lm</span>(fatal_rate <span class="op">~</span><span class="st"> </span>beertax, <span class="dt">data=</span>Fatalities))</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = fatal_rate ~ beertax, data = Fatalities)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.09060 -0.37768 -0.09436  0.28548  2.27643 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1.85331    0.04357  42.539  &lt; 2e-16 ***
## beertax      0.36461    0.06217   5.865 1.08e-08 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.5437 on 334 degrees of freedom
## Multiple R-squared:  0.09336,    Adjusted R-squared:  0.09065 
## F-statistic: 34.39 on 1 and 334 DF,  p-value: 1.082e-08</code></pre>
</div>
<div id="fixed-effects" class="section level3" number="12.6.3">
<h3><span class="header-section-number">12.6.3</span> Fixed effects</h3>
<p>The term that allows for the fixed effects in the <code>lm</code> call is the <span class="math inline">\(-1\)</span></p>
<div class="sourceCode" id="cb852"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb852-1"><a href="causality.html#cb852-1"></a>model2&lt;-<span class="kw">summary</span>(<span class="kw">lm</span>(fatal_rate <span class="op">~</span><span class="st"> </span>beertax <span class="op">+</span><span class="st"> </span>state <span class="op">-</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data=</span>Fatalities))</span>
<span id="cb852-2"><a href="causality.html#cb852-2"></a><span class="kw">head</span>(model2<span class="op">$</span>coefficients)</span></code></pre></div>
<pre><code>##           Estimate Std. Error   t value     Pr(&gt;|t|)
## beertax -0.6558737 0.18784999 -3.491476 5.559697e-04
## stateal  3.4776301 0.31335679 11.097989 4.751833e-24
## stateaz  2.9099032 0.09253893 31.445179 5.672947e-95
## statear  2.8226785 0.13212532 21.363646 2.902574e-61
## stateca  1.9681613 0.07400678 26.594335 2.045800e-79
## stateco  1.9933497 0.08037085 24.801898 2.397281e-73</code></pre>
</div>
</div>
<div id="difference-in-differences" class="section level2" number="12.7">
<h2><span class="header-section-number">12.7</span> Difference-in-differences</h2>
<ul>
<li>Difference-in-differences (DID) is an empirical strategy used to make claims of causal inference.</li>
<li>A researcher considers some intervening factor (the introduction of a policy, a stock market shock, a terrorist attack, etc.) and seeks to prove that factor to be the cause of some outcome (bank closures, casualties, vote share, etc.).</li>
</ul>
<p>Let’s consider the task of estimating the effect of closing early-voting voting precincts in 17 counties in North Caroilna had on turnout in 2016.</p>
<ol style="list-style-type: decimal">
<li>Identify the population (A) to which the intervention was applied and identify a comparable population (B) to which the intervention was NOT applied.</li>
</ol>
<p>In our example, we would divide all 100 counties in North Carolina into</p>
<ul>
<li>group A, counties where early voting precincts were reduced, and</li>
<li>group B, counties where the number of early voting precincts was kept the same.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Identify the outcome of interest of both populations before and after the intervention (A-pre, A-post, B-pre, B-post).<br />
</li>
</ol>
<ul>
<li>This means we need to know the turnout rate for all counties in group A before the reform (e.g., in 2012) and after the reform (e.g., in 2016).<br />
</li>
<li>Likewise, we need to calculate the turnout rate in for counties in group B before the reform (2012) and after the reform (2016).</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Find D1: the difference between A-pre and B-pre.<br />
</li>
</ol>
<ul>
<li>This would be difference in the average turnout rate between group A and group B in 2012.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Find D2: the difference between A-post and B-post.</li>
</ol>
<ul>
<li>This would be the difference in the average turnout rate between group A and gropu B in 2016.</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>Calculate D2 minus D1 to find the difference-in-differences (DD). This would be a measure of how the differences between turnout rates in group A and B changed as a result of the closed precincts.</li>
</ol>
<p>Here’s a visual illustration of how this research strategy works:</p>
<p><img src="../Slides/Images/12.png" /></p>
<div id="did-in-practice" class="section level3" number="12.7.1">
<h3><span class="header-section-number">12.7.1</span> DID in practice</h3>
<ul>
<li>A series of train bombings in Madrid on March 11, 2004 left 191 people dead and 1,500 injured.</li>
<li>In the Spanish congressional elections which took place three days later, the Socialist party defeated the Conservative party.</li>
<li>Did the terrorist attack increase the Socialist party’s vote share?</li>
</ul>
<p>Identifying our treatment/control group:</p>
<ul>
<li>Voters living outside of Spain voted earlier, while Spanish residents voted on election day.</li>
<li>These groups are not the same, but could we assume a parallel trend? Are they consistently different?</li>
</ul>
<p><img src="../Slides/Images/13.png" /></p>
<p>How to do it?</p>
<table>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th>Respndent ID#</th>
<th>Voted Conservative (Y)</th>
<th>Treatment group (X1)</th>
<th>Post-treatment (X2)</th>
<th>Treatment AND Post (X1 x X2)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1001</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>1002</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>1003</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>1004</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1005</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>1006</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1007</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>1008</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[Y = \beta_0 + \beta_1X_1 + \beta_2X_2 + \beta_3(X_1 \times X_2) + \epsilon\]</span></p>
<ol style="list-style-type: decimal">
<li>One variable indicates whether or not respondents are affected by the treatment.</li>
<li>One variable indicates whether pre-post treatment.</li>
<li>One variable is the interaction.
<ul>
<li>This is our treatment effect</li>
<li>Effect of the treatment on the treated (ATT)</li>
</ul></li>
</ol>
</div>
<div id="regression-discontinuity" class="section level3" number="12.7.2">
<h3><span class="header-section-number">12.7.2</span> Regression discontinuity</h3>
<ul>
<li>In many cases interventions occur at a discontinuity.</li>
<li>Maybe only students above a specific score get free college?</li>
<li>Maybe only politicians who win the most votes get into office?</li>
<li>Regression discontinuity seeks to:
<ul>
<li>Compare respondents just above this cutoff to</li>
<li>Individuals just below this cutoff</li>
</ul></li>
</ul>
<div id="example-is-voting-a-habit" class="section level4" number="12.7.2.1">
<h4><span class="header-section-number">12.7.2.1</span> Example: Is voting a habit?</h4>
<ul>
<li>Some have argued that voting can be habitual</li>
<li>Prof. Marc Meredith tested this using data from California.</li>
<li>He looked at the turnout rates in the 2006 election for people around the voting eligibiltiy threshold for the 2004 election.</li>
</ul>
<p><img src="../Slides/Images/17.png" /></p>
<p>So how to do that?</p>
<ul>
<li>Well … that’s not so easy.</li>
<li>In essence we want to compare means just to the left and just to the right.</li>
<li>But what if there is a “trend” on the left/right?
<ul>
<li>A more advanced class would take you through this.</li>
<li>But, in essence, fit a “smooth” function to the left and right.</li>
</ul></li>
</ul>
<p>A simpler version</p>
<p><span class="math display">\[y= \beta_0 + \beta_1 X + \beta_2*I(X&gt;D) + \epsilon\]</span></p>
<p><span class="math inline">\(I(x)\)</span> is an indicator function. That means that it has the value 1 when <span class="math inline">\(x\)</span> is true and 0 otherwise.</p>
<ul>
<li>This is fitting single regression where <span class="math inline">\(y\)</span> is a funciton of <span class="math inline">\(x\)</span>.</li>
<li>BUT, you allow an intercept shift for before/after the discontinuity.</li>
</ul>
<p>The basic components:</p>
<ul>
<li><span class="math inline">\(Y\)</span>: An outcome variable (violence at <span class="math inline">\(t+1\)</span>)</li>
<li><span class="math inline">\(X\)</span>: A variable that determines the cutoff (violence at <span class="math inline">\(t\)</span>)</li>
<li><span class="math inline">\(D\)</span>: A cutoff/threshold</li>
<li>Does the relationship between <span class="math inline">\(Y\)</span> and <span class="math inline">\(X\)</span> “shift” right at <span class="math inline">\(D\)</span>?</li>
</ul>
<p><span class="math display">\[y= \beta_0 + \beta_1 X + \beta_2*I(X&gt;D) + \epsilon\]</span></p>
<p><embed src="../Slides/Images/RD3.pdf" /></p>
<p><embed src="../Slides/Images/RD4.pdf" /></p>

</div>
</div>
</div>
</div>






            </section>

          </div>
        </div>
      </div>
<a href="machine-learning.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
